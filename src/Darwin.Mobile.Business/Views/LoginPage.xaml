<!-- File: src/Darwin.Mobile.Business/Views/LoginPage.xaml -->
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:res="clr-namespace:Darwin.Mobile.Business.Resources"
    x:Class="Darwin.Mobile.Business.Views.LoginPage"
    Title="{x:Static res:AppResources.LoginTitle}"
    BackgroundColor="{DynamicResource PageBackgroundColor}">

    <!--
      Named root scroll view:
      The code-behind scrolls this to top when error appears,
      so error is never hidden under keyboard on smaller screens.
    -->
    <ScrollView x:Name="RootScrollView" VerticalOptions="Fill" HorizontalOptions="Fill">
        <Grid RowDefinitions="*,Auto,*" ColumnDefinitions="*" Padding="24">
            <StackLayout Grid.Row="1" Spacing="20" HorizontalOptions="Center" WidthRequest="360">
                <Image Source="loyan_logo.png"
                       WidthRequest="160"
                       HeightRequest="160"
                       HorizontalOptions="Center"
                       Aspect="AspectFit"
                       SemanticProperties.Description="Darwin app logo" />

                <Label Text="{x:Static res:AppResources.LoginTitle}"
                       FontSize="22"
                       FontAttributes="Bold"
                       HorizontalOptions="Center" />

                <!-- Email entry -->
                <Entry Placeholder="{x:Static res:AppResources.EmailLabel}"
                       Keyboard="Email"
                       Text="{Binding Email}"
                       ReturnType="Next"
                       AutomationId="EmailEntry" />

                <!-- Password entry -->
                <Entry Placeholder="{x:Static res:AppResources.PasswordLabel}"
                       IsPassword="True"
                       Text="{Binding Password}"
                       ReturnType="Done"
                       AutomationId="PasswordEntry" />

                <!-- Error label -->
                <Label Text="{Binding ErrorMessage}"
                       TextColor="Crimson"
                       FontSize="14"
                       LineBreakMode="WordWrap"
                       IsVisible="{Binding HasError}"
                       AutomationId="ErrorLabel" />

                <!-- Sign in button -->
                <Button Text="{x:Static res:AppResources.LoginButton}"
                        Command="{Binding LoginCommand}"
                        IsEnabled="{Binding IsBusy, Converter={StaticResource InverseBoolConverter}}"
                        HeightRequest="48"
                        CornerRadius="6"
                        AutomationId="SignInButton" />

                <!-- Optional version/footer -->
                <Label Text="{Binding AppVersion, FallbackValue=''}"
                       FontSize="12"
                       HorizontalOptions="Center"
                       Opacity="0.6" />
            </StackLayout>
        </Grid>
    </ScrollView>
</ContentPage>
