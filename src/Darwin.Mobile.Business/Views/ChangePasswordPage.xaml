<?xml version="1.0" encoding="utf-8"?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:Darwin.Mobile.Business.ViewModels"
    xmlns:res="clr-namespace:Darwin.Mobile.Business.Resources"
    x:Class="Darwin.Mobile.Business.Views.ChangePasswordPage"
    x:DataType="vm:ChangePasswordViewModel"
    Title="{x:Static res:AppResources.ChangePasswordTitle}">

    <ScrollView>
        <VerticalStackLayout Padding="24" Spacing="14">
            <Label Text="{x:Static res:AppResources.ChangePasswordTitle}"
                   Style="{StaticResource TitleLabelStyle}" />

            <Border StrokeThickness="1" Padding="16">
                <VerticalStackLayout Spacing="10">
                    <Label Text="{x:Static res:AppResources.CurrentPasswordLabel}" />
                    <Entry Text="{Binding CurrentPassword}" IsPassword="True" />

                    <Label Text="{x:Static res:AppResources.NewPasswordLabel}" />
                    <Entry Text="{Binding NewPassword}" IsPassword="True" />

                    <Label Text="{x:Static res:AppResources.ConfirmNewPasswordLabel}" />
                    <Entry Text="{Binding ConfirmNewPassword}" IsPassword="True" />

                    <!-- Feedback is intentionally near update button, not at page bottom. -->
                    <Label Text="{Binding SuccessMessage}"
                           TextColor="Green"
                           IsVisible="{Binding HasSuccess}" />

                    <Label Text="{Binding ErrorMessage}"
                           TextColor="Red"
                           IsVisible="{Binding HasError}" />

                    <Button Text="{x:Static res:AppResources.ChangePasswordButton}"
                            Command="{Binding UpdatePasswordCommand}" />

                    <ActivityIndicator IsVisible="{Binding IsBusy}"
                                       IsRunning="{Binding IsBusy}" />
                </VerticalStackLayout>
            </Border>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
