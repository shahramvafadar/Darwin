<?xml version="1.0" encoding="utf-8"?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:Darwin.Mobile.Consumer.ViewModels"
    xmlns:res="clr-namespace:Darwin.Mobile.Consumer.Resources"
    x:Class="Darwin.Mobile.Consumer.Views.ChangePasswordPage"
    x:DataType="vm:ChangePasswordViewModel"
    Title="{x:Static res:AppResources.ChangePasswordTitle}">

    <ScrollView>
        <VerticalStackLayout Padding="24" Spacing="14">
            <Label Text="{x:Static res:AppResources.ChangePasswordTitle}"
                   Style="{StaticResource TitleLabelStyle}" />

            <Border Stroke="{StaticResource Neutral300}" StrokeThickness="1" StrokeShape="RoundRectangle 12" Padding="16">
                <VerticalStackLayout Spacing="10">

                    <Label Text="{x:Static res:AppResources.CurrentPasswordLabel}" />
                    <Entry Text="{Binding CurrentPassword}" IsPassword="True" />

                    <Label Text="{x:Static res:AppResources.NewPasswordLabel}" />
                    <Entry Text="{Binding NewPassword}" IsPassword="True" />

                    <Label Text="{x:Static res:AppResources.ConfirmNewPasswordLabel}" />
                    <Entry Text="{Binding ConfirmNewPassword}" IsPassword="True" />

                    <!-- Keep feedback close to Update button so it never hides below keyboard. -->
                    <Label Text="{Binding SuccessMessage}"
                           TextColor="Green"
                           FontSize="14"
                           IsVisible="{Binding HasSuccess}" />

                    <Label Text="{Binding ErrorMessage}"
                           TextColor="Red"
                           FontSize="14"
                           IsVisible="{Binding HasError}" />

                    <Button Text="{x:Static res:AppResources.ChangePasswordButton}"
                            Style="{StaticResource PrimaryButtonStyle}"
                            Command="{Binding UpdatePasswordCommand}" />

                    <ActivityIndicator IsVisible="{Binding IsBusy}"
                                       IsRunning="{Binding IsBusy}"
                                       Color="{StaticResource BrandGold500}" />
                </VerticalStackLayout>
            </Border>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
